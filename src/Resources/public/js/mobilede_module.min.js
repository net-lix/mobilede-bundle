(function(c,a,d,e){var b={};b.init=function(){b.container=d(".md-ads"),b.checkboxes=d(".md-filter-attr.checkbox-group input"),b.selects=d(".md-select"),b.btnShowFilters=d("#showFilters"),b.filters=[];b.filters.all="*";var w={price:{min:0,max:10000000},power:{min:0,max:10000000},mileage:{min:0,max:10000000}};var g="original-order";b.checkboxes.on("change",function(D){D.preventDefault();b.container.trigger("filter-update");b.updateLocationHash(b.filters,b.options.sortBy)});b.selects.on("change",function(D){D.preventDefault();b.container.trigger("filter-update");b.updateLocationHash(b.filters,b.options.sortBy)});b.container.on("filter-update",function(F,E){var H=[],D=[];var G=d(".md-filters select.sorting").val();b.options.sortBy=G?G:"original-order";b.checkboxes.each(function(I,J){if(J.checked){H.push(J.value)}});b.filters["checkbox-group"]=H.length?H:"";b.selects.each(function(I,K){var J=d(K);if(!d(K).hasClass("sorting")){if(J.val()!="*"){D.push(J.val())}}});b.filters.select=D.length?D.join(""):false;b.filters["select-group"]=D.length?D:"";b.filters.all=b.concatValues(b.filters)});var t=parseInt(d(".md-ads .item:first-child").data("price"));var z=0;d(".md-ads .item").each(function(){var D=parseInt(d(this).data("price"));if(D<t&&D!=""){t=D}if(D>z&&D!=""){z=D}});var m=parseInt(d(".md-ads .item:first-child").data("power"));var q=0;d(".md-ads .item").each(function(){var D=parseInt(d(this).data("power"));if(D<m&&D!=""){m=D}if(D>q&&D!=""){q=D}});var h=parseInt(d(".md-ads .item:first-child").data("mileage"));var x=0;d(".md-ads .item").each(function(){var D=parseInt(d(this).data("mileage"));if(D<h&&D!=""){h=D}if(D>x&&D!=""){x=D}});var u=d("#priceSlider").slider({tooltip_split:true,min:Number(t?t:w.price.min),max:Number(z?z:w.price.max),range:true,values:[Number(t?t:w.price.min),Number(z?z:w.price.max)]});var l=d("#powerSlider").slider({tooltip_split:true,min:Number(m?m:w.power.min),max:Number(q?q:w.power.max),range:true,values:[Number(m?m:w.power.min),Number(q?q:w.power.max)]});var v=d("#mileageSlider").slider({tooltip_split:true,min:Number(h?h:w.mileage.min),max:Number(x?x:w.mileage.max),range:true,values:[Number(h?h:w.mileage.min),Number(x?x:w.mileage.max)]});var y=t.toLocaleString("de-DE",{style:"currency",currency:"EUR"});var s=z.toLocaleString("de-DE",{style:"currency",currency:"EUR"});var f=m.toLocaleString("de-DE",{style:"decimal"})+"KW";var k=q.toLocaleString("de-DE",{style:"decimal"})+"KW";var C=h.toLocaleString("de-DE",{style:"decimal"})+"km";var o=x.toLocaleString("de-DE",{style:"decimal"})+"km";d("#priceSlider .ui-slider-handle:nth-of-type(1)").attr("data-price-min",y);d("#priceSlider .ui-slider-handle:nth-of-type(2)").attr("data-price-max",s);d("#powerSlider .ui-slider-handle:nth-of-type(1)").attr("data-power-min",f);d("#powerSlider .ui-slider-handle:nth-of-type(2)").attr("data-power-max",k);d("#mileageSlider .ui-slider-handle:nth-of-type(1)").attr("data-mileage-min",C);d("#mileageSlider .ui-slider-handle:nth-of-type(2)").attr("data-mileage-max",o);var n=location.hash.match(/priceMin=([^&]+)/i);if(n!=null){n=parseFloat(n[1])}var r=location.hash.match(/priceMax=([^&]+)/i);if(r!=null){r=parseFloat(r[1])}var i=location.hash.match(/powerMin=([^&]+)/i);if(i!=null){i=parseFloat(i[1])}var j=location.hash.match(/powerMax=([^&]+)/i);if(j!=null){j=parseFloat(j[1])}var A=location.hash.match(/mileageMin=([^&]+)/i);if(A!=null){A=parseFloat(A[1])}var B=location.hash.match(/mileageMax=([^&]+)/i);if(B!=null){B=parseFloat(B[1])}if(n!=null&&r!=null){u.slider("values",[n,r]);d("#priceSlider span:nth-of-type(1)").attr("data-price-min",n.toLocaleString("de-DE",{style:"currency",currency:"EUR"}));d("#priceSlider span:nth-of-type(2)").attr("data-price-max",r.toLocaleString("de-DE",{style:"currency",currency:"EUR"}));d("#priceSlider").closest(".range-slider").addClass("updated");w.price.min=n;w.price.max=r}if(i!=null&&j!=null){l.slider("values",[i,j]);d("#powerSlider span:nth-of-type(1)").attr("data-power-min",i.toLocaleString("de-DE",{style:"decimal"})+"KW");d("#powerSlider span:nth-of-type(2)").attr("data-power-max",j.toLocaleString("de-DE",{style:"decimal"})+"KW");d("#powerSlider").closest(".range-slider").addClass("updated");w.power.min=i;w.power.max=j}if(A!=null&&B!=null){v.slider("values",[A,B]);d("#mileageSlider span:nth-of-type(1)").attr("data-mileage-min",A.toLocaleString("de-DE",{style:"decimal"})+"km");d("#mileageSlider span:nth-of-type(2)").attr("data-mileage-max",B.toLocaleString("de-DE",{style:"decimal"})+"km");d("#mileageSlider").closest(".range-slider").addClass("updated");w.mileage.min=A;w.mileage.max=B}b.options={itemSelector:".item",layoutMode:"fitRows",getSortData:{price:"[data-price] parseFloat",power:"[data-power] parseFloat",mileage:"[data-mileage] parseFloat",title:function(D){return d(D).find(".title").text()},number:".number parseInt",category:"[data-category]"},sortBy:g,filter:function(){var I=d(this);var G=I.attr("data-price");var J=(w.price.min<=G&&w.price.max>=G);var F=I.attr("data-power");var D=(w.power.min<=F&&w.power.max>=F);var E=I.attr("data-mileage");var H=(w.mileage.min<=E&&w.mileage.max>=E);return I.is(b.filters.all)&&J&&D&&H}};b.updateFiltersFromHash();b.container.isotope(b.options);b.btnShowFilters.click(function(){d(".md-filters .md-filters-body").toggle()});d("#shuffle").click(function(){b.container.isotope("shuffle")});if(typeof mdListShuffle!=="undefined"&&mdListShuffle===1){d("#shuffle").trigger("click")}b.container.on("arrangeComplete",function(){if(!b.container.data("isotope").filteredItems.length){d(".md-no-result").show()}else{d(".md-no-result").hide()}});d("#filterReset").on("click",function(){d(".md-filters input[type=checkbox]").prop("checked",false);d(".md-filters select").val("*");d(".range-slider").removeClass("updated");if(typeof u!=="undefined"){var D=u.slider("option");u.slider("values",[D.min,D.max]);d("#priceSlider span:nth-of-type(1)").attr("data-price-min",D.min.toLocaleString("de-DE",{style:"currency",currency:"EUR"}));d("#priceSlider span:nth-of-type(2)").attr("data-price-max",D.max.toLocaleString("de-DE",{style:"currency",currency:"EUR"}))}if(typeof l!=="undefined"){D=l.slider("option");l.slider("values",[D.min,D.max]);d("#powerSlider span:nth-of-type(1)").attr("data-power-min",D.min.toLocaleString("de-DE",{style:"decimal"})+"KW");d("#powerSlider span:nth-of-type(2)").attr("data-power-max",D.max.toLocaleString("de-DE",{style:"decimal"})+"KW")}if(typeof v!=="undefined"){D=v.slider("option");v.slider("values",[D.min,D.max]);d("#mileageSlider span:nth-of-type(1)").attr("data-mileage-min",D.min.toLocaleString("de-DE",{style:"decimal"})+"km");d("#mileageSlider span:nth-of-type(2)").attr("data-mileage-max",D.max.toLocaleString("de-DE",{style:"decimal"})+"km")}w={price:{min:0,max:10000000},power:{min:0,max:10000000},mileage:{min:0,max:10000000}};b.container.isotope({filter:"*"});b.container.trigger("filter-update");b.updateLocationHash(b.filters,b.options.sortBy);return false});function p(F,D,K){var G=+K.values[0],J=+K.values[1],L=F.attr("data-filter-group");var E=F.attr("id");if(E=="priceSlider"){var I=G.toLocaleString("de-DE",{style:"currency",currency:"EUR"});var H=J.toLocaleString("de-DE",{style:"currency",currency:"EUR"});d(".ui-slider-handle:nth-of-type(1)").attr("data-price-min",I);d(".ui-slider-handle:nth-of-type(2)").attr("data-price-max",H)}if(E=="powerSlider"){var I=G.toLocaleString("de-DE",{style:"decimal"})+"KW";var H=J.toLocaleString("de-DE",{style:"decimal"})+"KW";d(".ui-slider-handle:nth-of-type(1)").attr("data-power-min",I);d(".ui-slider-handle:nth-of-type(2)").attr("data-power-max",H)}if(E=="mileageSlider"){var I=G.toLocaleString("de-DE",{style:"decimal"})+"km";var H=J.toLocaleString("de-DE",{style:"decimal"})+"km";d(".ui-slider-handle:nth-of-type(1)").attr("data-mileage-min",I);d(".ui-slider-handle:nth-of-type(2)").attr("data-mileage-max",H)}F.closest(".range-slider").addClass("updated");w[L]={min:G||min,max:J||max};b.container.isotope(b.options);b.updateLocationHash(b.filters,b.options.sortBy)}u.on("slide",function(D,E){var F=d(this);p(F,D,E)});l.on("slide",function(D,E){var F=d(this);p(F,D,E)});v.on("slide",function(D,E){var F=d(this);p(F,D,E)})};b.updateLocationHash=function(g,i){var j="";if(g.all!=="*"){j="filter="+encodeURIComponent(g.all)}if(g.all!=="*"&&i!=="original-order"){j+="&"}if(i!=="original-order"){j+="sort="+encodeURIComponent(i)}d(".range-slider.updated").each(function(){if(d(this).find("> div").attr("id")=="priceSlider"){var l=d(this).find("span:nth-of-type(1)").attr("data-price-min").replace("€","").replace(".","").replace(",",".");var k=d(this).find("span:nth-of-type(2)").attr("data-price-max").replace("€","").replace(".","").replace(",",".");if(j!=""){j+="&"}j+="priceMin="+d.trim(l);j+="&priceMax="+d.trim(k)}if(d(this).find("> div").attr("id")=="powerSlider"){var l=d(this).find("span:nth-of-type(1)").attr("data-power-min").replace("KW","").replace(".","").replace(",",".");var k=d(this).find("span:nth-of-type(2)").attr("data-power-max").replace("KW","").replace(".","").replace(",",".");if(j!=""){j+="&"}j+="powerMin="+l;j+="&powerMax="+k}if(d(this).find("> div").attr("id")=="mileageSlider"){var l=d(this).find("span:nth-of-type(1)").attr("data-mileage-min").replace("km","").replace(".","").replace(",",".");var k=d(this).find("span:nth-of-type(2)").attr("data-mileage-max").replace("km","").replace(".","").replace(",",".");if(j!=""){j+="&"}j+="mileageMin="+l;j+="&mileageMax="+k}});j=j.replace(new RegExp("%2C","g"),"");location.hash=j;var h=d(".md-filters .submit");if(h.length>0){var f=h.attr("href").split("#");h.attr("href",f[0]+"#"+j)}b.container.isotope(b.options)};b.getHashFilter=function(){var f=location.hash.match(/filter=([^&]+)/i);var g=f&&f[1];return g&&decodeURIComponent(g)};b.getHashSorting=function(){var g=location.hash.match(/sort=([^&]+)/i);var f=g&&g[1];return f&&decodeURIComponent(f)};b.updateFiltersFromHash=function(){var h=b.getHashFilter();var g=b.getHashSorting();if(!h&&!g){return}if(h!==null){var f=h.split(".");b.selects.val("*");d.each(f,function(i,j){if(j){d('.md-select option[value=".'+j+'"]').parent().val("."+j);d('.md-filter-attr :checkbox[value=".'+j+'"]').prop("checked","true")}})}d(".md-select.sorting").val(g);b.container.trigger("filter-update");b.container.isotope(b.options)};b.concatValues=function(g){var f=[];if(typeof g["checkbox-group"]!=="undefined"&&g["checkbox-group"]!==""){for(var h in g["checkbox-group"]){if(g.select){f.push(g["checkbox-group"][h]+g.select)}else{f.push(g["checkbox-group"][h])}}return f.join(",")}if(!g.select||0===g.select.length){return"*"}return g.select};d(c).on("hashchange",b.updateFiltersFromHash);d(c).on("load",b.init)})(window,document,jQuery);